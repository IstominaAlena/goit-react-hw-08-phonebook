(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{16:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return f}));var r=n(9),a=n(18),c=n(8),u=n.n(c),s=n(13),o=n.n(s),i=n(5),l=n(21),d="/contacts",b=Object(i.c)("contacts/getContacts",function(){var e=Object(a.a)(u.a.mark((function e(t,n){var r,a,c,s,i,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,c=a(),s=c.auth.token){e.next=5;break}return e.abrupt("return");case 5:return l.a.set(s),e.prev=6,e.next=9,o.a.get(d);case 9:return i=e.sent,b=i.data,e.abrupt("return",b);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",r(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(i.c)("contacts/addContact",function(){var e=Object(a.a)(u.a.mark((function e(t,n){var a,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,o.a.post(d,t);case 4:return c=e.sent,s=c.data,i=Object(r.a)(Object(r.a)({},t),{},{id:s.id}),e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(i.c)("contacts/deleteContact",function(){var e=Object(a.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.delete(d+"/"+t);case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}())},19:function(e,t,n){e.exports={"header-section":"Header_header-section__1V0ag",navigation:"Header_navigation__2449L",link:"Header_link__2EMFR",active:"Header_active__18yHv"}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n.n(r),c={set:function(e){a.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){a.a.defaults.headers.common.Authorization=""}}},26:function(e,t,n){e.exports={"user-container":"UserMenu_user-container__35Ya0",name:"UserMenu_name__27Wwb"}},30:function(e,t,n){e.exports={logout:"Button_logout__16mxN",submitBtn:"Button_submitBtn___hEgQ",btn:"Button_btn__2zNiD"}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(30),a=n.n(r),c=n(1),u=function(e){var t=e.type,n=e.text,r=e.onClick,u=e.className;return Object(c.jsx)("button",{onClick:r||void 0,type:t,className:"submit"===t?a.a.submitBtn:a.a[u],children:n})},s=u;u.defaultProps={type:"button",onClick:void 0,className:"btn"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),a=Object(r.b)("filterContacts")},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(87),a=n(1),c=function(){return Object(a.jsx)(r.a,{style:{color:"rgb(21, 180, 243)",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}},6:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return O}));var r=n(18),a=n(8),c=n.n(a),u=n(13),s=n.n(u),o=n(5),i=n(21);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var l="/users/signup",d="/users/login",b="/users/logout",j="/users/current",f=Object(o.c)("auth/signupUser",function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,s.a.post(l,t);case 4:return a=e.sent,u=a.data,i.a.set(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(o.c)("auth/loginUser",function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,s.a.post(d,t);case 4:return a=e.sent,u=a.data,i.a.set(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(o.c)("auth/logoutUser",function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,s.a.post(b);case 4:return i.a.unset(),e.abrupt("return");case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(o.c)("auth/refreshUser",function(){var e=Object(r.a)(c.a.mark((function e(t,n){var r,a,u,o,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.rejectWithValue,a=n.getState,u=a(),"null"!==(o=u.auth.token)){e.next=5;break}return e.abrupt("return");case 5:return i.a.set(o),e.prev=6,e.next=9,s.a.get(j);case 9:return l=e.sent,d=l.data,e.abrupt("return",d);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",r(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}())},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),u=n.n(c),s=n(24),o=n.n(s),i=n(17),l=n(10),d=n(45),b=n(5),j=n(20),f=n(46),p=n.n(f),h=n(47),O=n.n(h),v=n(3),g=n(6),x=Object(b.d)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,refreshStatus:!1,error:null},extraReducers:(r={},Object(v.a)(r,g.d.pending,(function(e){e.error=null})),Object(v.a)(r,g.d.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.error=null})),Object(v.a)(r,g.d.rejected,(function(e,t){var n=t.payload;e.error=n})),Object(v.a)(r,g.a.pending,(function(e){e.error=null})),Object(v.a)(r,g.a.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.error=null})),Object(v.a)(r,g.a.rejected,(function(e,t){var n=t.payload;e.status="rejected",e.error=n})),Object(v.a)(r,g.b.pending,(function(e){e.error=null})),Object(v.a)(r,g.b.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.error=null})),Object(v.a)(r,g.b.rejected,(function(e,t){var n=t.payload;e.error=n})),Object(v.a)(r,g.c.pending,(function(e){e.refreshStatus=!0,e.error=null})),Object(v.a)(r,g.c.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.refreshStatus=!1,e.error=null})),Object(v.a)(r,g.c.rejected,(function(e,t){var n=t.payload;e.refreshStatus=!1,e.error=n})),r)}).reducer,m=n(16),k=n(42),y=Object(b.d)({name:"contact",initialState:{items:[],filter:"",status:"idle",error:null},extraReducers:(a={},Object(v.a)(a,m.c.pending,(function(e){e.status="pending",e.error=null})),Object(v.a)(a,m.c.fulfilled,(function(e,t){var n=t.payload;e.status="resolved",e.items=n})),Object(v.a)(a,m.c.rejected,(function(e,t){var n=t.payload;e.status="rejected",e.error=n})),Object(v.a)(a,m.a.pending,(function(e){e.status="pending",e.error=null})),Object(v.a)(a,m.a.fulfilled,(function(e,t){var n=t.payload;e.status="resolved",e.items.push(n)})),Object(v.a)(a,m.a.rejected,(function(e,t){var n=t.payload;e.status="rejected",e.error=n})),Object(v.a)(a,m.b.pending,(function(e){e.status="pending",e.error=null})),Object(v.a)(a,m.b.fulfilled,(function(e,t){var n=t.payload;e.status="resolved";var r=e.items.filter((function(e){return e.id!==n}));e.items=r})),Object(v.a)(a,m.b.rejected,(function(e,t){var n=t.payload;e.status="rejected",e.error=n})),Object(v.a)(a,k.a.type,(function(e,t){var n=t.payload;e.filter=n})),a)}).reducer,_={key:"auth/token",storage:p.a,whitelist:["token"]},w=Object(b.a)({reducer:{auth:Object(j.g)(_,x),contacts:y},middleware:function(e){return e({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}}).concat(O.a)},devTools:!1}),N=Object(j.h)(w),C=function(e){return e.auth.isLoggedIn},S=function(e){return e.auth.user.name},L=function(e){return e.auth.refreshStatus},W=n(32),z=n(26),B=n.n(z),I=n(1),V=function(){var e=Object(l.b)(),t=Object(l.c)(S);return Object(I.jsxs)("div",{className:B.a["user-container"],children:[Object(I.jsxs)("p",{className:B.a.text,children:["Welcome back ",Object(I.jsx)("span",{className:B.a.name,children:t})]}),Object(I.jsx)(W.a,{text:"Logout",type:"button",className:"logout",onClick:function(){return e(Object(g.b)())}})]})},T=n(19),U=n.n(T),H=function(){var e=Object(l.c)(C);return Object(I.jsxs)("header",{className:U.a["header-section"],children:[Object(I.jsxs)("nav",{className:U.a.navigation,children:[Object(I.jsx)(i.c,{exact:!0,to:"/",className:U.a.link,activeClassName:U.a.active,children:"Home"}),e&&Object(I.jsx)(i.c,{to:"/contacts",className:U.a.link,activeClassName:U.a.active,children:"My phonebook"}),!e&&Object(I.jsx)(i.c,{to:"/login",className:U.a.link,activeClassName:U.a.active,children:"LogIn"})]}),e&&Object(I.jsx)(V,{})]})},M=n(4),E=n(43),R=n(9),A=n(25),F=["children","redirectTo"],J=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=Object(A.a)(e,F),c=Object(l.c)(C);return Object(I.jsx)(M.b,Object(R.a)(Object(R.a)({},a),{},{children:c?t:Object(I.jsx)(M.a,{to:r})}))},D=["children","redirected","redirectTo"],P=function(e){var t=e.children,n=e.redirected,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,u=Object(A.a)(e,D),s=Object(l.c)(C)&&r;return Object(I.jsx)(M.b,Object(R.a)(Object(R.a)({},u),{},{children:s?Object(I.jsx)(M.a,{to:c}):t}))},Q=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,102))})),Y=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,103))})),q=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,104))})),G=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,101))})),K=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(c.Suspense,{fallback:Object(I.jsx)(E.a,{}),children:Object(I.jsxs)(M.d,{children:[Object(I.jsx)(P,{exact:!0,path:"/",children:Object(I.jsx)(Q,{})}),Object(I.jsx)(P,{path:"/login",redirected:!0,redirectTo:"/contacts",children:Object(I.jsx)(Y,{})}),Object(I.jsx)(P,{path:"/signup",redirected:!0,children:Object(I.jsx)(q,{})}),Object(I.jsx)(J,{path:"/contacts",redirectTo:"/login",children:Object(I.jsx)(G,{})})]})})})};n(84);function X(){var e=Object(l.b)(),t=Object(l.c)(L);return Object(c.useEffect)((function(){e(Object(g.c)())}),[e]),!t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(H,{}),Object(I.jsx)(K,{})]})}o.a.render(Object(I.jsx)(u.a.StrictMode,{children:Object(I.jsx)(l.a,{store:w,children:Object(I.jsx)(d.a,{loading:null,persistor:N,children:Object(I.jsx)(i.a,{children:Object(I.jsx)(X,{})})})})}),document.getElementById("root"))}},[[85,4,6]]]);
//# sourceMappingURL=main.6dab66e7.chunk.js.map